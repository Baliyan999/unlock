#!/bin/bash

# ะกะบัะธะฟั ะดะปั ัะฑะพัะบะธ ะฟัะพะตะบัะฐ ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ

echo "๐ ะะฐัะธะฝะฐะตะผ ัะฑะพัะบั ะฟัะพะตะบัะฐ..."

# ะัะธััะบะฐ ะฟัะตะดัะดััะตะน ัะฑะพัะบะธ
echo "๐งน ะัะธััะบะฐ ะฟัะตะดัะดััะตะน ัะฑะพัะบะธ..."
rm -rf dist/

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
echo "๐ฆ ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน..."
npm ci

# ะัะพะฒะตัะบะฐ ะปะธะฝัะตัะฐ
echo "๐ ะัะพะฒะตัะบะฐ ะบะพะดะฐ..."
npm run lint

# ะกะฑะพัะบะฐ ะฟัะพะตะบัะฐ
echo "๐๏ธ  ะกะฑะพัะบะฐ ะฟัะพะตะบัะฐ..."
npm run build

# ะัะพะฒะตัะบะฐ ัะตะทัะปััะฐัะฐ
if [ -d "dist" ]; then
    echo "โ ะกะฑะพัะบะฐ ะทะฐะฒะตััะตะฝะฐ ััะฟะตัะฝะพ!"
    echo "๐ ะะฐะทะผะตัั ัะฐะนะปะพะฒ:"
    du -h dist/assets/*.js dist/assets/*.css 2>/dev/null || echo "ะคะฐะนะปั ะฝะต ะฝะฐะนะดะตะฝั"
    
    echo ""
    echo "๐ ะกะพะดะตัะถะธะผะพะต dist/:"
    ls -la dist/
    
    echo ""
    echo "๐ ะัะพะตะบั ะณะพัะพะฒ ะบ ะดะตะฟะปะพั!"
    echo "๐ ะะฐะฟะบะฐ dist/ ัะพะดะตัะถะธั ะฒัะต ัะฐะนะปั ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ"
else
    echo "โ ะัะธะฑะบะฐ ัะฑะพัะบะธ!"
    exit 1
fi