# 🎯 Руководство по админ-панели Telegram бота

## 📋 Структура админ-панели

### 🏠 Главная админ-панель
```
👨‍💼 Панель администратора

Добро пожаловать в админ-панель! Здесь вы можете:

📋 Все об отзывах - управление отзывами и модерация
🎫 Промокоды - создание и управление промокодами

Выберите раздел:
```

**Кнопки:**
- `📋 Все об отзывах` - переход к управлению отзывами
- `🎫 Промокоды` - переход к управлению промокодами
- `🔙 Назад в главное меню` - возврат к главному меню

---

### 📋 Раздел "Все об отзывах"
```
📋 Управление отзывами

Здесь вы можете:

📋 Все отзывы - просмотреть все отзывы
⏳ На модерации - отзывы, ожидающие одобрения
✅ Одобренные - опубликованные отзывы
❌ Отклоненные - отклоненные отзывы
📊 Статистика - общая статистика по отзывам
👑 Студенты - отзывы от студентов UNLOCK

Выберите действие:
```

**Кнопки:**
- `📋 Все отзывы` - просмотр всех отзывов
- `⏳ На модерации` - отзывы на модерации
- `✅ Одобренные` - одобренные отзывы
- `❌ Отклоненные` - отклоненные отзывы
- `📊 Статистика` - статистика по отзывам
- `👑 Студенты` - отзывы студентов
- `🔙 Назад в админ-панель` - возврат к главной админ-панели

---

### 🎫 Раздел "Промокоды"
```
🎫 Управление промокодами

Здесь вы можете:

➕ Создать промокод - создать новый промокод со скидкой
📋 Все промокоды - просмотреть все созданные промокоды
📊 Статистика промокодов - общая статистика по промокодам

Выберите действие:
```

**Кнопки:**
- `➕ Создать промокод` - создание нового промокода
- `📋 Все промокоды` - просмотр всех промокодов
- `📊 Статистика промокодов` - статистика по промокодам
- `🔙 Назад в админ-панель` - возврат к главной админ-панели

---

## 🎫 Создание промокодов

### 📝 Формат ввода промокода:
```
КОД СКИДКА% КОЛИЧЕСТВО_ИСПОЛЬЗОВАНИЙ ОПИСАНИЕ
```

### 💡 Примеры:
```
WELCOME10 10 100 Приветственная скидка 10%
STUDENT20 20 1 Скидка для студентов 20%
SUMMER15 15 50 Летняя акция 15%
NEWYEAR25 25 200 Новогодняя скидка 25%
```

### 🔄 Автоматическая генерация:
1. Введите `AUTO`
2. Затем введите: `СКИДКА% КОЛИЧЕСТВО_ИСПОЛЬЗОВАНИЙ ОПИСАНИЕ`
3. Пример: `10 100 Приветственная скидка 10%`

---

## 🛠️ Управление промокодами

### 📋 Просмотр промокодов:
- Нажмите `📋 Все промокоды`
- Увидите список всех промокодов с информацией:
  - Статус (✅ активен / ❌ неактивен)
  - Код промокода
  - Процент скидки
  - Количество использований
  - Описание
  - Создатель
  - Дата создания

### 🗑️ Удаление/деактивация промокодов:
Используйте команды в чате:
- `/deactivate_КОД` - деактивация промокода
- `/delete_КОД` - удаление промокода

Примеры:
- `/deactivate_WELCOME10`
- `/delete_STUDENT20`

---

## 📊 Статистика

### 📈 Статистика промокодов:
- Общее количество промокодов
- Количество активных промокодов
- Количество неактивных промокодов
- Количество истекших промокодов
- Общее количество использований

---

## 🚀 Запуск системы

### 📦 Запуск всей системы:
```bash
cd /Users/baliyan99/Desktop/сайт/api
node start-system.js
```

### 🔧 Запуск отдельных компонентов:
```bash
# API сервер
node server.js

# Telegram бот
node telegram-bot-fixed.js
```

---

## 🌐 API Endpoints

### 📡 Доступные endpoints:
- `GET http://localhost:3001/api/reviews` - получить отзывы
- `GET http://localhost:3001/api/stats` - статистика
- `POST http://localhost:3001/api/promo/validate` - валидация промокода
- `POST http://localhost:3001/api/promo/use` - применение промокода

### 🧪 Тестирование API:
```bash
# Валидация промокода
curl -X POST http://localhost:3001/api/promo/validate \
  -H "Content-Type: application/json" \
  -d '{"code":"WELCOME10","price":1000000}'

# Применение промокода
curl -X POST http://localhost:3001/api/promo/use \
  -H "Content-Type: application/json" \
  -d '{"code":"WELCOME10","userId":123456,"userUsername":"test","originalPrice":1000000}'
```

---

## 🎯 Навигация по админ-панели

```
Главное меню
    ↓
👨‍💼 Панель админа
    ↓
┌─────────────────┬─────────────────┐
│ 📋 Все об отзывах │ 🎫 Промокоды    │
└─────────────────┴─────────────────┘
    ↓                     ↓
Управление отзывами    Управление промокодами
    ↓                     ↓
┌─────────────────┐   ┌─────────────────┐
│ 📋 Все отзывы   │   │ ➕ Создать      │
│ ⏳ На модерации │   │ 📋 Все промокоды│
│ ✅ Одобренные   │   │ 📊 Статистика   │
│ ❌ Отклоненные  │   └─────────────────┘
│ 📊 Статистика   │
│ 👑 Студенты     │
└─────────────────┘
```

---

## ✅ Готовые промокоды

В системе уже созданы тестовые промокоды:
- `WELCOME10` - 10% скидка (100 использований)
- `STUDENT20` - 20% скидка (1 использование)
- `SUMMER15` - 15% скидка (50 использований)
- `NEWYEAR25` - 25% скидка (200 использований)

---

## 🎉 Система готова к использованию!

Все компоненты работают:
- ✅ Telegram бот с новой структурой админ-панели
- ✅ API сервер с поддержкой промокодов
- ✅ База данных с промокодами
- ✅ Калькулятор с полем для промокодов
- ✅ Валидация и применение промокодов
